# Календар оплат

Джерела:
- `SRC-R1-ACT-RECONCILIATION.pdf` (`Республіка 1`, оновлений акт звірки; анонімізовано)
  - Для `Республіка 1` збережено і фактичні платежі (з акту), і планові періоди 2025-2030 для повного календаря.
- `SRC-R2-33.3M2-32-PAYMENT-SCHEDULE.pdf` (`Республіка 2`; анонімізовано)
- `Нивки` (розрахункова модель кредиту): 2 350 000 грн, 15% перший внесок (листопад 2021), кредит 20 років, 7% річних, класична схема.

## Єдина БД

- Головне джерело для фронтенду: `report-db.js` (один файл БД з усіма рядками).
- Структура: **один рядок = одна подія платежу/витрати/доходу**.
- Ключові поля рядка:
  - `project_key`, `project_name`
  - `date`, `month`, `quarter`, `year`
  - `entry_kind` (`expense` / `income`)
  - `category_key`, `category_name`
  - `scheduled_amount_usd`, `scheduled_amount_uah`
  - `paid_amount_usd`, `paid_amount_uah`
  - `fx_rate_uah_per_usd`, `status`, `payment_date`, `exclude_from_summary`

## Запуск

1. У корені проєкту виконайте:
   ```bash
   python3 -m http.server 8000
   ```
2. Відкрийте:
   `http://localhost:8000/output/spreadsheet/payment-calendar/`

## Що є в інтерфейсі

- Вкладки `Республіка 1` / `Республіка 2` в одному сайті.
- Вкладки `Республіка 1` / `Республіка 2` / `Нивки` в одному сайті.
- Summary зверху: `Оплачено`, `Залишок по плану`, `Залишок достроково`, `Всього`, лічильник статусів.
- Фільтр по роках і швидкі лінки по місяцях.
- Клік по картці: редагування статусу, суми (USD/UAH), дати та нотатки.
- Перемикач валюти `USD/UAH` + ручний курс USD -> UAH.
- Поле `Достроковий тариф` рахується автоматично від базового майбутнього платежу.
- Локальне збереження змін у `localStorage` браузера.
- Кнопки `Експорт backup` / `Імпорт backup` для довгострокового резервного копіювання і переносу на інший пристрій.

## Нивки: модель розрахунку

- Перший внесок: `15%` у `11.2021`.
- Залишок в кредит: `85%`, строк `20 років`.
- Процентна ставка: `7% річних`, щомісячно `7%/12`.
- Схема: класична (тіло кредиту рівними частинами, проценти на залишок).
- Відстрочка: `03.2022`, `04.2022`, `05.2022` = `0` оплата; ці 3 платежі перенесені в кінець графіка (додані місяці `12.2041`-`02.2042`).
- Конвертація в USD: використано середній офіційний курс НБУ за кожен місяць для історії.
- Прогноз курсу: для майбутніх місяців використано останній доступний курс на сьогодні (константа).
